{"ast":null,"code":"import _objectSpread from\"C:/Users/PRATHAM/OneDrive/Desktop/LifeSync/LifeSync/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{motion,AnimatePresence}from'framer-motion';import{User,Hospital,LogOut,MapPin,Phone,Shield,Menu,X,Ambulance,ChevronRight,Bed,Phone as PhoneIcon}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function LifeSyncApp(){// 1. STATE MANAGEMENT (Persistence Simulation)\nconst[userRole,setUserRole]=useState(()=>{try{return localStorage.getItem('role')||null;}catch(_unused){return null;}});const[isUserRegistered,setIsUserRegistered]=useState(()=>{try{return localStorage.getItem('isRegistered')==='true';}catch(_unused2){return false;}});const[currentPage,setCurrentPage]=useState('home');const[isMenuOpen,setIsMenuOpen]=useState(false);const[sosStarted,setSosStarted]=useState(false);const[position,setPosition]=useState(null);const[watchId,setWatchId]=useState(null);const[notificationStatus,setNotificationStatus]=useState({});const[userData,setUserData]=useState(()=>{try{const stored=localStorage.getItem('userData');return stored?JSON.parse(stored):null;}catch(_unused3){return null;}});// 2. LOGIN HANDLER\nconst handleLogin=role=>{localStorage.setItem('role',role);setUserRole(role);// Check if user is registered, if not go to registration\nif(role==='user'&&!isUserRegistered){setCurrentPage('register');}else{setCurrentPage('home');}};const handleRegistration=data=>{localStorage.setItem('userData',JSON.stringify(data));localStorage.setItem('isRegistered','true');setUserData(data);setIsUserRegistered(true);setCurrentPage('home');};const handleLogout=()=>{localStorage.clear();setUserRole(null);setIsUserRegistered(false);setUserData(null);setCurrentPage('login');};// SOS / Notifications\nconst emergencyContacts=()=>{// gather up to 5 contacts from stored userData or defaults\nconst contacts=[];if(userData!==null&&userData!==void 0&&userData.emergencyContact1&&userData!==null&&userData!==void 0&&userData.emergencyPhone1)contacts.push({name:userData.emergencyContact1,phone:userData.emergencyPhone1});if(userData!==null&&userData!==void 0&&userData.emergencyContact2&&userData!==null&&userData!==void 0&&userData.emergencyPhone2)contacts.push({name:userData.emergencyContact2,phone:userData.emergencyPhone2});// fill with defaults if less than 5\nwhile(contacts.length<5){contacts.push({name:\"Contact \".concat(contacts.length+1),phone:\"+91 90000 0000\".concat(contacts.length)});}return contacts.slice(0,5);};const[calculatedHospitals,setCalculatedHospitals]=useState([]);const[mapRef,setMapRef]=useState(null);const[mapLoaded,setMapLoaded]=useState(false);// Search for REAL nearby hospitals using Google Places API\nconst searchNearbyHospitals=async userPos=>{if(!userPos||!window.google){console.log('Waiting for Google Maps API...');return;}try{const userLocation=new window.google.maps.LatLng(userPos.coords.latitude,userPos.coords.longitude);const service=new window.google.maps.places.PlacesService(document.createElement('div'));const request={location:userLocation,radius:5000,// 5km radius\ntype:'hospital',rankBy:'distance'};service.nearbySearch(request,(results,status)=>{if(status==='OK'&&results){// Get top 3 hospitals\nconst topHospitals=results.slice(0,3).map((place,idx)=>{var _place$opening_hours;const distance=window.google.maps.geometry.spherical.computeDistanceBetween(userLocation,place.geometry.location)/1000;// Convert to km\n// Estimate time: assume 30 km/hour average speed in city\nconst estimatedTime=Math.ceil(distance/30*60);return{name:place.name,address:place.vicinity||'Address not available',lat:place.geometry.location.lat(),lng:place.geometry.location.lng(),dist:\"\".concat(distance.toFixed(1),\"km\"),time:\"\".concat(estimatedTime,\" mins\"),distValue:distance,rating:place.rating||'N/A',icuAvail:Math.floor(Math.random()*15)+1,// Random ICU beds for simulation\nambulance:'+91 98765 1000'+idx,toll:'1800-HOSPITAL-'+idx,placeId:place.place_id,isOpenNow:(_place$opening_hours=place.opening_hours)!==null&&_place$opening_hours!==void 0&&_place$opening_hours.open_now?'Open':'Check Hours'};});setCalculatedHospitals(topHospitals);console.log('Found Real Hospitals:',topHospitals);}else{console.error('Places Search Error:',status);}});}catch(error){console.error('Error searching hospitals:',error);}};// Initialize map with proper error checking\nuseEffect(()=>{if(currentPage==='map'&&position&&window.google){const mapElement=document.getElementById('map');if(!mapElement){console.error('Map element not found');return;}if(mapRef&&mapLoaded){return;// Map already initialized\n}try{const map=new window.google.maps.Map(mapElement,{zoom:15,center:{lat:position.coords.latitude,lng:position.coords.longitude},mapTypeId:'roadmap'});// User marker (Blue)\nnew window.google.maps.Marker({position:{lat:position.coords.latitude,lng:position.coords.longitude},map:map,title:'Your Location',icon:'http://maps.google.com/mapfiles/ms/icons/blue-dot.png'});// Hospital markers (Red)\ncalculatedHospitals.forEach((hospital,idx)=>{new window.google.maps.Marker({position:{lat:hospital.lat,lng:hospital.lng},map:map,title:\"\".concat(idx+1,\". \").concat(hospital.name),label:\"\".concat(idx+1),icon:'http://maps.google.com/mapfiles/ms/icons/hospital.png'});// Add info window\nconst infowindow=new window.google.maps.InfoWindow({content:\"<div style=\\\"padding:10px\\\">\\n              <strong>\".concat(hospital.name,\"</strong><br/>\\n              \").concat(hospital.address,\"<br/>\\n              Distance: \").concat(hospital.dist,\"\\n            </div>\")});const marker=new window.google.maps.Marker({position:{lat:hospital.lat,lng:hospital.lng},map:map,title:hospital.name});marker.addListener('click',()=>{infowindow.open(map,marker);});});setMapRef(map);setMapLoaded(true);}catch(error){console.error('Map initialization error:',error);}}},[currentPage,position,calculatedHospitals,mapRef,mapLoaded]);const nearestHospitals=calculatedHospitals.length>0?calculatedHospitals:[];const notifyAll=pos=>{if(!pos)return;// Build message with location and hospital details\nconst coords=\"\".concat(pos.coords.latitude.toFixed(6),\", \").concat(pos.coords.longitude.toFixed(6));const mapsLink=\"https://www.google.com/maps?q=\".concat(pos.coords.latitude,\",\").concat(pos.coords.longitude);const timestamp=new Date().toLocaleTimeString();const contacts=emergencyContacts();const status={};// Simulate sending SMS to emergency contacts\ncontacts.forEach((c,i)=>{const msg=\"EMERGENCY ALERT!\\nName: \".concat((userData===null||userData===void 0?void 0:userData.name)||'Unknown',\"\\nAge: \").concat((userData===null||userData===void 0?void 0:userData.age)||'N/A',\"\\nBlood: \").concat((userData===null||userData===void 0?void 0:userData.bloodGroup)||'N/A',\"\\nLocation: \").concat(coords,\"\\nTime: \").concat(timestamp,\"\\nMap: \").concat(mapsLink);// Simulate SMS sending\nstatus[\"contact_\".concat(i)]={to:c.phone,name:c.name,status:'SMS Sent',message:msg,timestamp:timestamp,location:coords};// Log to console to simulate backend\nconsole.log(\"SMS to \".concat(c.name,\" (\").concat(c.phone,\"):\"),msg);});// Notify nearest hospitals with ambulance details\nnearestHospitals.forEach((h,i)=>{const msg=\"INCOMING EMERGENCY!\\nPatient: \".concat((userData===null||userData===void 0?void 0:userData.name)||'Unknown',\"\\nAge: \").concat((userData===null||userData===void 0?void 0:userData.age)||'N/A',\"\\nBlood: \").concat((userData===null||userData===void 0?void 0:userData.bloodGroup)||'N/A',\"\\nLocation: \").concat(coords,\"\\nTime: \").concat(timestamp,\"\\nMap: \").concat(mapsLink,\"\\nHospital: \").concat(h.name,\"\\nETA: \").concat(h.time);status[\"hospital_\".concat(i)]={to:h.ambulance,name:h.name,status:'Alert Sent',message:msg,timestamp:timestamp,location:coords,hospital:h.name};// Log to console to simulate backend\nconsole.log(\"Alert to \".concat(h.name,\" (\").concat(h.ambulance,\"):\"),msg);});setNotificationStatus(status);};const startSOS=async()=>{if(!('geolocation'in navigator)){alert('Geolocation not supported in this browser');return;}setSosStarted(true);// Request high accuracy position first\nnavigator.geolocation.getCurrentPosition(pos=>{setPosition(pos);notifyAll(pos);// Search for REAL nearby hospitals using Google Places API\nsearchNearbyHospitals(pos);},err=>{console.error('Geolocation error:',err.message);alert('Unable to get location. Please enable location services.');},{enableHighAccuracy:true,maximumAge:0,timeout:10000});// Start watching for continuous location updates\nconst id=navigator.geolocation.watchPosition(pos=>{setPosition(pos);},err=>{console.error('Watch error:',err.message);},{enableHighAccuracy:true,maximumAge:5000,timeout:10000});setWatchId(id);};const stopSOS=()=>{if(watchId!==null&&navigator.geolocation.clearWatch){navigator.geolocation.clearWatch(watchId);}setWatchId(null);setSosStarted(false);setNotificationStatus({});};// 3. UI COMPONENTS\n// --- REGISTRATION SCREEN ---\nif(userRole==='user'&&!isUserRegistered&&currentPage==='register'){return/*#__PURE__*/_jsx(RegistrationForm,{onSubmit:handleRegistration,onBack:()=>{setUserRole(null);localStorage.clear();}});}// --- LOGIN SCREEN ---\nif(!userRole){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-red-50 to-slate-50 flex flex-col items-center justify-center p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-white rounded-3xl shadow-xl p-8 border border-slate-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-red-100 rounded-full\",children:/*#__PURE__*/_jsx(Shield,{className:\"text-red-600 w-10 h-10\"})})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-black text-center text-slate-800 mb-2\",children:\"LifeSync\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-slate-500 mb-8\",children:\"Emergency Medical Assistance\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleLogin('user'),className:\"w-full flex items-center justify-between p-5 bg-gradient-to-r from-red-50 to-red-100 hover:from-red-100 hover:to-red-150 border-2 border-red-200 rounded-2xl transition-all group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(User,{className:\"text-red-600 w-6 h-6\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-slate-700\",children:\"Citizen Portal\"})]}),/*#__PURE__*/_jsx(ChevronRight,{className:\"text-red-600 w-5 h-5\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleLogin('hospital'),className:\"w-full flex items-center justify-between p-5 bg-gradient-to-r from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-150 border-2 border-blue-200 rounded-2xl transition-all group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(Hospital,{className:\"text-blue-600 w-6 h-6\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-slate-700\",children:\"Hospital Staff\"})]}),/*#__PURE__*/_jsx(ChevronRight,{className:\"text-blue-600 w-5 h-5\"})]})]})]})});}// --- CITIZEN PORTAL ---\nif(userRole==='user'){return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-white text-slate-900 relative overflow-hidden\",children:[/*#__PURE__*/_jsx(AnimatePresence,{children:isMenuOpen&&/*#__PURE__*/_jsxs(motion.div,{initial:{x:'-100%'},animate:{x:0},exit:{x:'-100%'},className:\"fixed inset-0 z-50 bg-white w-3/4 shadow-2xl p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mb-10\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-black text-red-600 text-xl\",children:\"LifeSync\"}),/*#__PURE__*/_jsx(X,{onClick:()=>setIsMenuOpen(false)})]}),/*#__PURE__*/_jsxs(\"nav\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{setCurrentPage('profile');setIsMenuOpen(false);},className:\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-red-600 transition\",children:[/*#__PURE__*/_jsx(User,{}),\" Profile\"]}),/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{setCurrentPage('nearest');setIsMenuOpen(false);},className:\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-red-600 transition\",children:[/*#__PURE__*/_jsx(Hospital,{}),\" Nearest Hospitals\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-4 border-t\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-bold text-slate-400 uppercase mb-4\",children:\"Emergency Services\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{window.location.href='tel:112';setIsMenuOpen(false);},className:\"w-full flex items-center gap-4 p-3 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition mb-3\",children:[/*#__PURE__*/_jsx(Phone,{className:\"w-5 h-5\"}),\" Call 112\"]})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:handleLogout,className:\"flex items-center gap-4 text-lg font-bold text-red-600 cursor-pointer hover:text-red-700 transition\",children:[/*#__PURE__*/_jsx(LogOut,{}),\" Log Out\"]})]})]})}),/*#__PURE__*/_jsxs(\"header\",{className:\"p-6 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(Menu,{onClick:()=>setIsMenuOpen(true),className:\"w-8 h-8 cursor-pointer\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-2 w-2 rounded-full bg-green-500 animate-pulse\"})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"p-6\",children:[currentPage==='home'&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center py-12\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-black mb-2\",children:\"Ready for Assistance\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-400 mb-6\",children:\"Press the SOS button to alert contacts and nearby hospitals\"}),/*#__PURE__*/_jsxs(motion.button,{whileTap:{scale:0.95},animate:sosStarted?{scale:[1,1.06,1]}:{},transition:{repeat:sosStarted?Infinity:0,duration:1},onClick:()=>sosStarted?stopSOS():startSOS(),className:\"w-72 h-72 rounded-full flex flex-col items-center justify-center text-white text-5xl font-black shadow-2xl transition-colors \".concat(sosStarted?'bg-orange-500':'bg-red-600 shadow-red-200'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-3xl\",children:sosStarted?'ACTIVE':'SOS'}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium mt-2\",children:sosStarted?'Sending location...':'Tap to alert'})]}),sosStarted&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 w-full max-w-3xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-4 rounded-2xl shadow mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center flex-wrap gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500\",children:\"Live Location (GPS Precise)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-sm\",children:position?\"\".concat(position.coords.latitude.toFixed(6),\", \").concat(position.coords.longitude.toFixed(6)):'Acquiring...'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-slate-400\",children:[\"Accuracy: \",position?\"\\xB1\".concat(position.coords.accuracy.toFixed(0),\"m\"):'N/A']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right flex gap-2\",children:[position&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage('map'),className:\"text-sm text-blue-600 font-semibold bg-blue-50 px-3 py-1 rounded-lg hover:bg-blue-100\",children:\"\\uD83D\\uDCCD View Map\"}),position&&/*#__PURE__*/_jsx(\"a\",{className:\"text-sm text-blue-600 font-semibold bg-blue-50 px-3 py-1 rounded-lg hover:bg-blue-100\",href:\"https://www.google.com/maps?q=\".concat(position.coords.latitude,\",\").concat(position.coords.longitude),target:\"_blank\",rel:\"noreferrer\",children:\"\\uD83D\\uDDFA\\uFE0F GMaps\"}),/*#__PURE__*/_jsx(\"button\",{onClick:stopSOS,className:\"text-sm text-white font-bold bg-red-600 px-3 py-1 rounded-lg hover:bg-red-700\",children:\"Stop\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:nearestHospitals.map((h,i)=>{var _notificationStatus;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-white rounded-2xl shadow flex flex-col md:flex-row md:justify-between md:items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-slate-900\",children:h.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500\",children:h.address}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-green-600 font-semibold mt-1\",children:[\"\\uD83D\\uDCCD \",h.dist,\" \\u2022 \",h.time,\" away\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 mt-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-green-50 p-2 rounded-lg\",children:[/*#__PURE__*/_jsx(Bed,{className:\"w-4 h-4 text-green-600\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500\",children:\"ICU Beds\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-green-600\",children:h.icuAvail})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-blue-50 p-2 rounded-lg\",children:[/*#__PURE__*/_jsx(Ambulance,{className:\"w-4 h-4 text-blue-600\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500\",children:\"Ambulance\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-blue-600 text-sm\",children:h.ambulance})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 md:mt-0 md:text-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-slate-600 mb-2\",children:[\"Status: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-green-600\",children:((_notificationStatus=notificationStatus[\"hospital_\".concat(i)])===null||_notificationStatus===void 0?void 0:_notificationStatus.status)||(notificationStatus[\"hospital_\".concat(i)]?notificationStatus[\"hospital_\".concat(i)].status:'notified')})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{window.location.href=\"tel:\".concat(h.ambulance);setNotificationStatus(prev=>_objectSpread(_objectSpread({},prev),{},{[\"hospital_\".concat(i)]:_objectSpread(_objectSpread({},prev[\"hospital_\".concat(i)]||{}),{},{status:'called'})}));},className:\"bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-xl font-bold\",children:\"Call Ambulance\"})]})]},i);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 bg-white p-3 rounded-2xl shadow\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-bold mb-2\",children:\"Notifications\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-2\",children:[Object.keys(notificationStatus).length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-slate-500\",children:\"Notifications will appear here once dispatched.\"}),Object.entries(notificationStatus).map(_ref=>{let[k,v]=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-slate-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-slate-500\",children:v.name}),/*#__PURE__*/_jsx(\"div\",{className:\"font-bold text-sm\",children:v.to}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-slate-600\",children:v.status})]},k);})]})]})]})]}),currentPage==='profile'&&/*#__PURE__*/_jsxs(\"div\",{className:\"animate-in slide-in-from-bottom duration-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 mb-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage('home'),className:\"flex-1 text-slate-400 font-bold py-2 px-4 bg-slate-100 hover:bg-slate-200 rounded-lg transition\",children:\"\\u2190 Back\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage('home'),className:\"flex-1 text-white font-bold py-2 px-4 bg-red-600 hover:bg-red-700 rounded-lg transition\",children:\"Home\"})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-black mb-6\",children:\"Your Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-50 p-6 rounded-3xl space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-2xl\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-400 uppercase\",children:\"Name\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-lg\",children:(userData===null||userData===void 0?void 0:userData.name)||'Not set'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-2xl\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-400 uppercase\",children:\"Age\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:(userData===null||userData===void 0?void 0:userData.age)||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-2xl\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-400 uppercase\",children:\"Blood Group\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-red-600 text-lg\",children:(userData===null||userData===void 0?void 0:userData.bloodGroup)||'N/A'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-2xl\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-400 uppercase\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:(userData===null||userData===void 0?void 0:userData.phone)||'Not set'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-2xl\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-400 uppercase\",children:\"Email\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:(userData===null||userData===void 0?void 0:userData.email)||'Not set'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-4 border-t\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-400 uppercase\",children:\"Emergency Contacts\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 mt-3\",children:[(userData===null||userData===void 0?void 0:userData.emergencyContact1)&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium bg-white p-3 rounded-lg border border-slate-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:userData.emergencyContact1}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-600\",children:userData.emergencyPhone1})]}),(userData===null||userData===void 0?void 0:userData.emergencyContact2)&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium bg-white p-3 rounded-lg border border-slate-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:userData.emergencyContact2}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-600\",children:userData.emergencyPhone2})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{handleLogout();},className:\"w-full mt-6 bg-red-100 hover:bg-red-200 text-red-600 font-bold py-3 rounded-xl transition-colors\",children:\"Logout\"})]})]}),currentPage==='nearest'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage('home'),className:\"mb-6 text-slate-400 font-bold\",children:\"\\u2190 Back\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-black mb-6\",children:\"Top 3 Facilities\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:[{name:'City General Hospital',dist:'1.2km',beds:'4',time:'5 mins',address:'123 Medical St, Downtown',ambulance:'+91 98765 10001',toll:'1800-CITY-911',icuAvail:4},{name:'St. Mary ICU Center',dist:'2.5km',beds:'2',time:'9 mins',address:'456 Healthcare Ave, North Zone',ambulance:'+91 98765 10002',toll:'1800-MARY-911',icuAvail:2},{name:'Metro Health Complex',dist:'3.8km',beds:'12',time:'12 mins',address:'789 Wellness Rd, Metro Circle',ambulance:'+91 98765 10003',toll:'1800-METRO-911',icuAvail:12}].map((h,i)=>/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:i*0.1},className:\"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm hover:shadow-md transition-all cursor-pointer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-slate-900\",children:h.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-slate-500 flex items-center gap-1 mt-1\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4\"}),\" \",h.address]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-600 font-black text-lg\",children:h.time}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-400\",children:h.dist})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3 pt-3 border-t\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-green-50 p-2 rounded-lg\",children:[/*#__PURE__*/_jsx(Bed,{className:\"w-4 h-4 text-green-600\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500\",children:\"ICU Beds\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-green-600\",children:h.icuAvail})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-blue-50 p-2 rounded-lg\",children:[/*#__PURE__*/_jsx(Ambulance,{className:\"w-4 h-4 text-blue-600\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500\",children:\"Ambulance\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-blue-600 text-sm\",children:\"Available\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 pt-3 border-t space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-slate-700\",children:[/*#__PURE__*/_jsx(PhoneIcon,{className:\"w-4 h-4 text-orange-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold\",children:h.ambulance})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-slate-700\",children:[/*#__PURE__*/_jsx(Phone,{className:\"w-4 h-4 text-purple-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold\",children:h.toll})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"w-full mt-3 bg-red-600 hover:bg-red-700 text-white py-2 rounded-xl font-bold text-sm transition-colors\",children:\"Call Ambulance\"})]},i))})]})]})]});}// --- MAP PAGE ---\nif(userRole==='user'&&currentPage==='map'){return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-4 bg-red-600 text-white\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-bold\",children:\"Live Location & Hospitals\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage('home'),className:\"text-white hover:text-gray-200\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsx(\"div\",{id:\"map\",style:{width:'100%',height:'calc(100vh - 60px)'}})]});}// --- HOSPITAL STAFF VIEW ---\nif(userRole==='hospital'){return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-slate-900 text-white p-6\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"flex justify-between items-center mb-10\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-black\",children:\"Staff Control\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-400 underline decoration-green-500\",children:\"Live Station Active\"})]}),/*#__PURE__*/_jsx(LogOut,{onClick:handleLogout,className:\"text-slate-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-800 p-6 rounded-3xl border border-red-500/30 animate-pulse\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 bg-red-600 rounded-full\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-red-500\",children:\"ACTIVE INBOUND SOS\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-slate-300 mb-4 font-mono uppercase tracking-tighter\",children:[\"Patient: John Doe (Male, 28) \",/*#__PURE__*/_jsx(\"br\",{}),\"Loc: 17.3850\\xB0 N, 78.4867\\xB0 E\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"w-full bg-red-600 py-4 rounded-xl font-bold flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(MapPin,{}),\" TRACK ON MAP\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-800 p-6 rounded-3xl\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-bold mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Ambulance,{className:\"w-5 h-5\"}),\" Dispatch Unit\"]}),/*#__PURE__*/_jsx(\"label\",{className:\"text-[10px] text-slate-400 uppercase font-bold\",children:\"Assign Driver Number\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mt-1\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"tel\",placeholder:\"+91 00000 00000\",className:\"flex-1 bg-slate-700 border-none rounded-xl p-3 text-sm\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-600 px-4 rounded-xl font-bold font-sm\",children:\"SEND\"})]})]})]})]});}}// --- REGISTRATION FORM COMPONENT ---\nfunction RegistrationForm(_ref2){let{onSubmit,onBack}=_ref2;const[formData,setFormData]=useState({name:'',age:'',bloodGroup:'',phone:'',email:'',emergencyContact1:'',emergencyPhone1:'',emergencyContact2:'',emergencyPhone2:''});const[step,setStep]=useState(1);const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=()=>{if(!formData.name||!formData.age||!formData.bloodGroup||!formData.phone){alert('Please fill all required fields');return;}onSubmit(formData);};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-red-50 to-slate-50 p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto mt-10\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onBack,className:\"mb-6 text-slate-600 font-bold flex items-center gap-2\",children:\"\\u2190 Back\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-3xl shadow-xl p-8 border border-slate-100\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-black text-slate-800 mb-2\",children:\"Setup Profile\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500 mb-6\",children:\"Complete your profile for emergency assistance\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2 mb-8\",children:[1,2].map(s=>/*#__PURE__*/_jsx(\"div\",{className:\"h-1 flex-1 rounded-full transition-all \".concat(s<=step?'bg-red-600':'bg-slate-200')},s))}),step===1&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Full Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Your full name\",value:formData.name,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Age *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"age\",placeholder:\"Age\",value:formData.age,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Blood Group *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"bloodGroup\",value:formData.bloodGroup,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{children:\"O+\"}),/*#__PURE__*/_jsx(\"option\",{children:\"O-\"}),/*#__PURE__*/_jsx(\"option\",{children:\"A+\"}),/*#__PURE__*/_jsx(\"option\",{children:\"A-\"}),/*#__PURE__*/_jsx(\"option\",{children:\"B+\"}),/*#__PURE__*/_jsx(\"option\",{children:\"B-\"}),/*#__PURE__*/_jsx(\"option\",{children:\"AB+\"}),/*#__PURE__*/_jsx(\"option\",{children:\"AB-\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Phone *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phone\",placeholder:\"+91 XXXXX XXXXX\",value:formData.phone,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"your@email.com\",value:formData.email,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setStep(2),className:\"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-xl mt-6\",children:\"Next\"})]}),step===2&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-slate-800 mb-4\",children:\"Emergency Contacts\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Contact 1 Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"emergencyContact1\",placeholder:\"Contact name\",value:formData.emergencyContact1,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Contact 1 Phone *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"emergencyPhone1\",placeholder:\"+91 XXXXX XXXXX\",value:formData.emergencyPhone1,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Contact 2 Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"emergencyContact2\",placeholder:\"Contact name\",value:formData.emergencyContact2,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-500 uppercase\",children:\"Contact 2 Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"emergencyPhone2\",placeholder:\"+91 XXXXX XXXXX\",value:formData.emergencyPhone2,onChange:handleChange,className:\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setStep(1),className:\"flex-1 bg-slate-200 hover:bg-slate-300 text-slate-800 font-bold py-3 rounded-xl\",children:\"Back\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-xl\",children:\"Complete\"})]})]})]})]})});}","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","User","Hospital","LogOut","MapPin","Phone","Shield","Menu","X","Ambulance","ChevronRight","Bed","PhoneIcon","jsx","_jsx","jsxs","_jsxs","LifeSyncApp","userRole","setUserRole","localStorage","getItem","_unused","isUserRegistered","setIsUserRegistered","_unused2","currentPage","setCurrentPage","isMenuOpen","setIsMenuOpen","sosStarted","setSosStarted","position","setPosition","watchId","setWatchId","notificationStatus","setNotificationStatus","userData","setUserData","stored","JSON","parse","_unused3","handleLogin","role","setItem","handleRegistration","data","stringify","handleLogout","clear","emergencyContacts","contacts","emergencyContact1","emergencyPhone1","push","name","phone","emergencyContact2","emergencyPhone2","length","concat","slice","calculatedHospitals","setCalculatedHospitals","mapRef","setMapRef","mapLoaded","setMapLoaded","searchNearbyHospitals","userPos","window","google","console","log","userLocation","maps","LatLng","coords","latitude","longitude","service","places","PlacesService","document","createElement","request","location","radius","type","rankBy","nearbySearch","results","status","topHospitals","map","place","idx","_place$opening_hours","distance","geometry","spherical","computeDistanceBetween","estimatedTime","Math","ceil","address","vicinity","lat","lng","dist","toFixed","time","distValue","rating","icuAvail","floor","random","ambulance","toll","placeId","place_id","isOpenNow","opening_hours","open_now","error","mapElement","getElementById","Map","zoom","center","mapTypeId","Marker","title","icon","forEach","hospital","label","infowindow","InfoWindow","content","marker","addListener","open","nearestHospitals","notifyAll","pos","mapsLink","timestamp","Date","toLocaleTimeString","c","i","msg","age","bloodGroup","to","message","h","startSOS","navigator","alert","geolocation","getCurrentPosition","err","enableHighAccuracy","maximumAge","timeout","id","watchPosition","stopSOS","clearWatch","RegistrationForm","onSubmit","onBack","className","children","onClick","div","initial","x","animate","exit","href","button","whileTap","scale","transition","repeat","Infinity","duration","accuracy","target","rel","_notificationStatus","prev","_objectSpread","Object","keys","entries","_ref","k","v","email","beds","opacity","y","delay","style","width","height","placeholder","_ref2","formData","setFormData","step","setStep","handleChange","e","value","handleSubmit","s","onChange"],"sources":["C:/Users/PRATHAM/OneDrive/Desktop/LifeSync/LifeSync/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { User, Hospital, LogOut, MapPin, Phone, Shield, Menu, X, Ambulance, ChevronRight, Bed, Phone as PhoneIcon } from 'lucide-react';\r\n\r\nexport default function LifeSyncApp() {\r\n  // 1. STATE MANAGEMENT (Persistence Simulation)\r\n  const [userRole, setUserRole] = useState(() => {\r\n    try {\r\n      return localStorage.getItem('role') || null;\r\n    } catch {\r\n      return null;\r\n    }\r\n  });\r\n  const [isUserRegistered, setIsUserRegistered] = useState(() => {\r\n    try {\r\n      return localStorage.getItem('isRegistered') === 'true';\r\n    } catch {\r\n      return false;\r\n    }\r\n  });\r\n  const [currentPage, setCurrentPage] = useState('home');\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n  const [sosStarted, setSosStarted] = useState(false);\r\n  const [position, setPosition] = useState(null);\r\n  const [watchId, setWatchId] = useState(null);\r\n  const [notificationStatus, setNotificationStatus] = useState({});\r\n  const [userData, setUserData] = useState(() => {\r\n    try {\r\n      const stored = localStorage.getItem('userData');\r\n      return stored ? JSON.parse(stored) : null;\r\n    } catch {\r\n      return null;\r\n    }\r\n  });\r\n\r\n  // 2. LOGIN HANDLER\r\n  const handleLogin = (role) => {\r\n    localStorage.setItem('role', role);\r\n    setUserRole(role);\r\n    \r\n    // Check if user is registered, if not go to registration\r\n    if (role === 'user' && !isUserRegistered) {\r\n      setCurrentPage('register');\r\n    } else {\r\n      setCurrentPage('home');\r\n    }\r\n  };\r\n\r\n  const handleRegistration = (data) => {\r\n    localStorage.setItem('userData', JSON.stringify(data));\r\n    localStorage.setItem('isRegistered', 'true');\r\n    setUserData(data);\r\n    setIsUserRegistered(true);\r\n    setCurrentPage('home');\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.clear();\r\n    setUserRole(null);\r\n    setIsUserRegistered(false);\r\n    setUserData(null);\r\n    setCurrentPage('login');\r\n  };\r\n\r\n  // SOS / Notifications\r\n  const emergencyContacts = () => {\r\n    // gather up to 5 contacts from stored userData or defaults\r\n    const contacts = [];\r\n    if (userData?.emergencyContact1 && userData?.emergencyPhone1) contacts.push({ name: userData.emergencyContact1, phone: userData.emergencyPhone1 });\r\n    if (userData?.emergencyContact2 && userData?.emergencyPhone2) contacts.push({ name: userData.emergencyContact2, phone: userData.emergencyPhone2 });\r\n    // fill with defaults if less than 5\r\n    while (contacts.length < 5) {\r\n      contacts.push({ name: `Contact ${contacts.length + 1}`, phone: `+91 90000 0000${contacts.length}` });\r\n    }\r\n    return contacts.slice(0,5);\r\n  };\r\n\r\n  const [calculatedHospitals, setCalculatedHospitals] = useState([]);\r\n  const [mapRef, setMapRef] = useState(null);\r\n  const [mapLoaded, setMapLoaded] = useState(false);\r\n\r\n  // Search for REAL nearby hospitals using Google Places API\r\n  const searchNearbyHospitals = async (userPos) => {\r\n    if (!userPos || !window.google) {\r\n      console.log('Waiting for Google Maps API...');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const userLocation = new window.google.maps.LatLng(userPos.coords.latitude, userPos.coords.longitude);\r\n      const service = new window.google.maps.places.PlacesService(\r\n        document.createElement('div')\r\n      );\r\n\r\n      const request = {\r\n        location: userLocation,\r\n        radius: 5000, // 5km radius\r\n        type: 'hospital',\r\n        rankBy: 'distance'\r\n      };\r\n\r\n      service.nearbySearch(request, (results, status) => {\r\n        if (status === 'OK' && results) {\r\n          // Get top 3 hospitals\r\n          const topHospitals = results.slice(0, 3).map((place, idx) => {\r\n            const distance = window.google.maps.geometry.spherical.computeDistanceBetween(\r\n              userLocation,\r\n              place.geometry.location\r\n            ) / 1000; // Convert to km\r\n\r\n            // Estimate time: assume 30 km/hour average speed in city\r\n            const estimatedTime = Math.ceil((distance / 30) * 60);\r\n\r\n            return {\r\n              name: place.name,\r\n              address: place.vicinity || 'Address not available',\r\n              lat: place.geometry.location.lat(),\r\n              lng: place.geometry.location.lng(),\r\n              dist: `${distance.toFixed(1)}km`,\r\n              time: `${estimatedTime} mins`,\r\n              distValue: distance,\r\n              rating: place.rating || 'N/A',\r\n              icuAvail: Math.floor(Math.random() * 15) + 1, // Random ICU beds for simulation\r\n              ambulance: '+91 98765 1000' + idx,\r\n              toll: '1800-HOSPITAL-' + idx,\r\n              placeId: place.place_id,\r\n              isOpenNow: place.opening_hours?.open_now ? 'Open' : 'Check Hours'\r\n            };\r\n          });\r\n\r\n          setCalculatedHospitals(topHospitals);\r\n          console.log('Found Real Hospitals:', topHospitals);\r\n        } else {\r\n          console.error('Places Search Error:', status);\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.error('Error searching hospitals:', error);\r\n    }\r\n  };\r\n\r\n  // Initialize map with proper error checking\r\n  useEffect(() => {\r\n    if (currentPage === 'map' && position && window.google) {\r\n      const mapElement = document.getElementById('map');\r\n      \r\n      if (!mapElement) {\r\n        console.error('Map element not found');\r\n        return;\r\n      }\r\n\r\n      if (mapRef && mapLoaded) {\r\n        return; // Map already initialized\r\n      }\r\n\r\n      try {\r\n        const map = new window.google.maps.Map(mapElement, {\r\n          zoom: 15,\r\n          center: { lat: position.coords.latitude, lng: position.coords.longitude },\r\n          mapTypeId: 'roadmap'\r\n        });\r\n\r\n        // User marker (Blue)\r\n        new window.google.maps.Marker({\r\n          position: { lat: position.coords.latitude, lng: position.coords.longitude },\r\n          map: map,\r\n          title: 'Your Location',\r\n          icon: 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png'\r\n        });\r\n\r\n        // Hospital markers (Red)\r\n        calculatedHospitals.forEach((hospital, idx) => {\r\n          new window.google.maps.Marker({\r\n            position: { lat: hospital.lat, lng: hospital.lng },\r\n            map: map,\r\n            title: `${idx + 1}. ${hospital.name}`,\r\n            label: `${idx + 1}`,\r\n            icon: 'http://maps.google.com/mapfiles/ms/icons/hospital.png'\r\n          });\r\n\r\n          // Add info window\r\n          const infowindow = new window.google.maps.InfoWindow({\r\n            content: `<div style=\"padding:10px\">\r\n              <strong>${hospital.name}</strong><br/>\r\n              ${hospital.address}<br/>\r\n              Distance: ${hospital.dist}\r\n            </div>`\r\n          });\r\n\r\n          const marker = new window.google.maps.Marker({\r\n            position: { lat: hospital.lat, lng: hospital.lng },\r\n            map: map,\r\n            title: hospital.name\r\n          });\r\n\r\n          marker.addListener('click', () => {\r\n            infowindow.open(map, marker);\r\n          });\r\n        });\r\n\r\n        setMapRef(map);\r\n        setMapLoaded(true);\r\n      } catch (error) {\r\n        console.error('Map initialization error:', error);\r\n      }\r\n    }\r\n  }, [currentPage, position, calculatedHospitals, mapRef, mapLoaded]);\r\n\r\n  const nearestHospitals = calculatedHospitals.length > 0 ? calculatedHospitals : [];\r\n\r\n  const notifyAll = (pos) => {\r\n    if (!pos) return;\r\n    \r\n    // Build message with location and hospital details\r\n    const coords = `${pos.coords.latitude.toFixed(6)}, ${pos.coords.longitude.toFixed(6)}`;\r\n    const mapsLink = `https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`;\r\n    const timestamp = new Date().toLocaleTimeString();\r\n    \r\n    const contacts = emergencyContacts();\r\n    const status = {};\r\n\r\n    // Simulate sending SMS to emergency contacts\r\n    contacts.forEach((c, i) => {\r\n      const msg = `EMERGENCY ALERT!\\nName: ${userData?.name || 'Unknown'}\\nAge: ${userData?.age || 'N/A'}\\nBlood: ${userData?.bloodGroup || 'N/A'}\\nLocation: ${coords}\\nTime: ${timestamp}\\nMap: ${mapsLink}`;\r\n      \r\n      // Simulate SMS sending\r\n      status[`contact_${i}`] = {\r\n        to: c.phone,\r\n        name: c.name,\r\n        status: 'SMS Sent',\r\n        message: msg,\r\n        timestamp: timestamp,\r\n        location: coords\r\n      };\r\n      \r\n      // Log to console to simulate backend\r\n      console.log(`SMS to ${c.name} (${c.phone}):`, msg);\r\n    });\r\n\r\n    // Notify nearest hospitals with ambulance details\r\n    nearestHospitals.forEach((h, i) => {\r\n      const msg = `INCOMING EMERGENCY!\\nPatient: ${userData?.name || 'Unknown'}\\nAge: ${userData?.age || 'N/A'}\\nBlood: ${userData?.bloodGroup || 'N/A'}\\nLocation: ${coords}\\nTime: ${timestamp}\\nMap: ${mapsLink}\\nHospital: ${h.name}\\nETA: ${h.time}`;\r\n      \r\n      status[`hospital_${i}`] = {\r\n        to: h.ambulance,\r\n        name: h.name,\r\n        status: 'Alert Sent',\r\n        message: msg,\r\n        timestamp: timestamp,\r\n        location: coords,\r\n        hospital: h.name\r\n      };\r\n      \r\n      // Log to console to simulate backend\r\n      console.log(`Alert to ${h.name} (${h.ambulance}):`, msg);\r\n    });\r\n\r\n    setNotificationStatus(status);\r\n  };\r\n\r\n  const startSOS = async () => {\r\n    if (!('geolocation' in navigator)) {\r\n      alert('Geolocation not supported in this browser');\r\n      return;\r\n    }\r\n\r\n    setSosStarted(true);\r\n\r\n    // Request high accuracy position first\r\n    navigator.geolocation.getCurrentPosition(\r\n      (pos) => {\r\n        setPosition(pos);\r\n        notifyAll(pos);\r\n        // Search for REAL nearby hospitals using Google Places API\r\n        searchNearbyHospitals(pos);\r\n      },\r\n      (err) => {\r\n        console.error('Geolocation error:', err.message);\r\n        alert('Unable to get location. Please enable location services.');\r\n      },\r\n      { enableHighAccuracy: true, maximumAge: 0, timeout: 10000 }\r\n    );\r\n\r\n    // Start watching for continuous location updates\r\n    const id = navigator.geolocation.watchPosition(\r\n      (pos) => {\r\n        setPosition(pos);\r\n      },\r\n      (err) => {\r\n        console.error('Watch error:', err.message);\r\n      },\r\n      { enableHighAccuracy: true, maximumAge: 5000, timeout: 10000 }\r\n    );\r\n    setWatchId(id);\r\n  };\r\n\r\n  const stopSOS = () => {\r\n    if (watchId !== null && navigator.geolocation.clearWatch) {\r\n      navigator.geolocation.clearWatch(watchId);\r\n    }\r\n    setWatchId(null);\r\n    setSosStarted(false);\r\n    setNotificationStatus({});\r\n  };\r\n\r\n  // 3. UI COMPONENTS\r\n\r\n  // --- REGISTRATION SCREEN ---\r\n  if (userRole === 'user' && !isUserRegistered && currentPage === 'register') {\r\n    return (\r\n      <RegistrationForm onSubmit={handleRegistration} onBack={() => {\r\n        setUserRole(null);\r\n        localStorage.clear();\r\n      }} />\r\n    );\r\n  }\r\n  \r\n  // --- LOGIN SCREEN ---\r\n  if (!userRole) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-red-50 to-slate-50 flex flex-col items-center justify-center p-6\">\r\n        <div className=\"w-full max-w-md bg-white rounded-3xl shadow-xl p-8 border border-slate-100\">\r\n          <div className=\"flex justify-center mb-6\">\r\n            <div className=\"p-4 bg-red-100 rounded-full\"><Shield className=\"text-red-600 w-10 h-10\" /></div>\r\n          </div>\r\n          <h1 className=\"text-4xl font-black text-center text-slate-800 mb-2\">LifeSync</h1>\r\n          <p className=\"text-center text-slate-500 mb-8\">Emergency Medical Assistance</p>\r\n          \r\n          <div className=\"space-y-4\">\r\n            <button onClick={() => handleLogin('user')} className=\"w-full flex items-center justify-between p-5 bg-gradient-to-r from-red-50 to-red-100 hover:from-red-100 hover:to-red-150 border-2 border-red-200 rounded-2xl transition-all group\">\r\n              <div className=\"flex items-center gap-4\">\r\n                <User className=\"text-red-600 w-6 h-6\" />\r\n                <span className=\"font-bold text-slate-700\">Citizen Portal</span>\r\n              </div>\r\n              <ChevronRight className=\"text-red-600 w-5 h-5\" />\r\n            </button>\r\n\r\n            <button onClick={() => handleLogin('hospital')} className=\"w-full flex items-center justify-between p-5 bg-gradient-to-r from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-150 border-2 border-blue-200 rounded-2xl transition-all group\">\r\n              <div className=\"flex items-center gap-4\">\r\n                <Hospital className=\"text-blue-600 w-6 h-6\" />\r\n                <span className=\"font-bold text-slate-700\">Hospital Staff</span>\r\n              </div>\r\n              <ChevronRight className=\"text-blue-600 w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- CITIZEN PORTAL ---\r\n  if (userRole === 'user') {\r\n    return (\r\n      <div className=\"min-h-screen bg-white text-slate-900 relative overflow-hidden\">\r\n        {/* Sliding Menu Overlay */}\r\n        <AnimatePresence>\r\n          {isMenuOpen && (\r\n            <motion.div initial={{ x: '-100%' }} animate={{ x: 0 }} exit={{ x: '-100%' }} className=\"fixed inset-0 z-50 bg-white w-3/4 shadow-2xl p-6\">\r\n              <div className=\"flex justify-between mb-10\">\r\n                <span className=\"font-black text-red-600 text-xl\">LifeSync</span>\r\n                <X onClick={() => setIsMenuOpen(false)} />\r\n              </div>\r\n              <nav className=\"space-y-6\">\r\n                <div onClick={() => {setCurrentPage('profile'); setIsMenuOpen(false)}} className=\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-red-600 transition\"><User /> Profile</div>\r\n                <div onClick={() => {setCurrentPage('nearest'); setIsMenuOpen(false)}} className=\"flex items-center gap-4 text-lg font-bold cursor-pointer hover:text-red-600 transition\"><Hospital /> Nearest Hospitals</div>\r\n                \r\n                <div className=\"pt-4 border-t\">\r\n                  <div className=\"text-xs font-bold text-slate-400 uppercase mb-4\">Emergency Services</div>\r\n                  <button onClick={() => { window.location.href = 'tel:112'; setIsMenuOpen(false); }} className=\"w-full flex items-center gap-4 p-3 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition mb-3\">\r\n                    <Phone className=\"w-5 h-5\" /> Call 112\r\n                  </button>\r\n                </div>\r\n                \r\n                <div onClick={handleLogout} className=\"flex items-center gap-4 text-lg font-bold text-red-600 cursor-pointer hover:text-red-700 transition\"><LogOut /> Log Out</div>\r\n              </nav>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n\r\n        {/* Header */}\r\n        <header className=\"p-6 flex justify-between items-center\">\r\n          <Menu onClick={() => setIsMenuOpen(true)} className=\"w-8 h-8 cursor-pointer\" />\r\n          <div className=\"h-2 w-2 rounded-full bg-green-500 animate-pulse\"></div>\r\n        </header>\r\n\r\n        {/* Dynamic Pages */}\r\n        <main className=\"p-6\">\r\n          {currentPage === 'home' && (\r\n            <div className=\"flex flex-col items-center justify-center py-12\">\r\n              <h2 className=\"text-2xl font-black mb-2\">Ready for Assistance</h2>\r\n              <p className=\"text-slate-400 mb-6\">Press the SOS button to alert contacts and nearby hospitals</p>\r\n\r\n              <motion.button \r\n                whileTap={{ scale: 0.95 }}\r\n                animate={sosStarted ? { scale: [1, 1.06, 1] } : {}}\r\n                transition={{ repeat: sosStarted ? Infinity : 0, duration: 1 }}\r\n                onClick={() => (sosStarted ? stopSOS() : startSOS())}\r\n                className={`w-72 h-72 rounded-full flex flex-col items-center justify-center text-white text-5xl font-black shadow-2xl transition-colors ${sosStarted ? 'bg-orange-500' : 'bg-red-600 shadow-red-200'}`}\r\n              >\r\n                <span className=\"text-3xl\">{sosStarted ? 'ACTIVE' : 'SOS'}</span>\r\n                <span className=\"text-sm font-medium mt-2\">{sosStarted ? 'Sending location...' : 'Tap to alert'}</span>\r\n              </motion.button>\r\n\r\n              {sosStarted && (\r\n                <div className=\"mt-6 w-full max-w-3xl\">\r\n                  <div className=\"bg-white p-4 rounded-2xl shadow mb-4\">\r\n                    <div className=\"flex justify-between items-center flex-wrap gap-2\">\r\n                      <div>\r\n                        <p className=\"text-xs text-slate-500\">Live Location (GPS Precise)</p>\r\n                        <p className=\"font-bold text-sm\">{position ? `${position.coords.latitude.toFixed(6)}, ${position.coords.longitude.toFixed(6)}` : 'Acquiring...'}</p>\r\n                        <p className=\"text-xs text-slate-400\">Accuracy: {position ? `${position.coords.accuracy.toFixed(0)}m` : 'N/A'}</p>\r\n                      </div>\r\n                      <div className=\"text-right flex gap-2\">\r\n                        {position && (\r\n                          <button onClick={() => setCurrentPage('map')} className=\"text-sm text-blue-600 font-semibold bg-blue-50 px-3 py-1 rounded-lg hover:bg-blue-100\"> View Map</button>\r\n                        )}\r\n                        {position && (\r\n                          <a className=\"text-sm text-blue-600 font-semibold bg-blue-50 px-3 py-1 rounded-lg hover:bg-blue-100\" href={`https://www.google.com/maps?q=${position.coords.latitude},${position.coords.longitude}`} target=\"_blank\" rel=\"noreferrer\"> GMaps</a>\r\n                        )}\r\n                        <button onClick={stopSOS} className=\"text-sm text-white font-bold bg-red-600 px-3 py-1 rounded-lg hover:bg-red-700\">Stop</button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-3\">\r\n                    {nearestHospitals.map((h, i) => (\r\n                      <div key={i} className=\"p-4 bg-white rounded-2xl shadow flex flex-col md:flex-row md:justify-between md:items-center\">\r\n                        <div>\r\n                          <h4 className=\"font-bold text-slate-900\">{h.name}</h4>\r\n                          <p className=\"text-sm text-slate-500\">{h.address}</p>\r\n                          <p className=\"text-xs text-green-600 font-semibold mt-1\"> {h.dist}  {h.time} away</p>\r\n                          <div className=\"flex gap-3 mt-2\">\r\n                            <div className=\"flex items-center gap-2 bg-green-50 p-2 rounded-lg\">\r\n                              <Bed className=\"w-4 h-4 text-green-600\" />\r\n                              <div>\r\n                                <p className=\"text-xs text-slate-500\">ICU Beds</p>\r\n                                <p className=\"font-bold text-green-600\">{h.icuAvail}</p>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 bg-blue-50 p-2 rounded-lg\">\r\n                              <Ambulance className=\"w-4 h-4 text-blue-600\" />\r\n                              <div>\r\n                                <p className=\"text-xs text-slate-500\">Ambulance</p>\r\n                                <p className=\"font-bold text-blue-600 text-sm\">{h.ambulance}</p>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"mt-3 md:mt-0 md:text-right\">\r\n                          <div className=\"text-sm text-slate-600 mb-2\">Status: <span className=\"font-semibold text-green-600\">{notificationStatus[`hospital_${i}`]?.status || (notificationStatus[`hospital_${i}`] ? notificationStatus[`hospital_${i}`].status : 'notified')}</span></div>\r\n                          <button onClick={() => { window.location.href = `tel:${h.ambulance}`; setNotificationStatus(prev => ({ ...prev, [`hospital_${i}`]: { ...(prev[`hospital_${i}`]||{}), status: 'called' } })); }} className=\"bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-xl font-bold\">\r\n                            Call Ambulance\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n\r\n                  <div className=\"mt-4 bg-white p-3 rounded-2xl shadow\">\r\n                    <h5 className=\"font-bold mb-2\">Notifications</h5>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\r\n                      {Object.keys(notificationStatus).length === 0 && <div className=\"text-sm text-slate-500\">Notifications will appear here once dispatched.</div>}\r\n                      {Object.entries(notificationStatus).map(([k,v]) => (\r\n                        <div key={k} className=\"p-2 bg-slate-50 rounded-lg\">\r\n                          <div className=\"text-xs text-slate-500\">{v.name}</div>\r\n                          <div className=\"font-bold text-sm\">{v.to}</div>\r\n                          <div className=\"text-xs text-slate-600\">{v.status}</div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {currentPage === 'profile' && (\r\n            <div className=\"animate-in slide-in-from-bottom duration-300\">\r\n              <div className=\"flex gap-3 mb-6\">\r\n                <button onClick={() => setCurrentPage('home')} className=\"flex-1 text-slate-400 font-bold py-2 px-4 bg-slate-100 hover:bg-slate-200 rounded-lg transition\"> Back</button>\r\n                <button onClick={() => setCurrentPage('home')} className=\"flex-1 text-white font-bold py-2 px-4 bg-red-600 hover:bg-red-700 rounded-lg transition\">Home</button>\r\n              </div>\r\n              <h2 className=\"text-3xl font-black mb-6\">Your Profile</h2>\r\n              <div className=\"bg-slate-50 p-6 rounded-3xl space-y-4\">\r\n                <div className=\"bg-white p-4 rounded-2xl\">\r\n                  <label className=\"text-xs font-bold text-slate-400 uppercase\">Name</label>\r\n                  <p className=\"font-bold text-lg\">{userData?.name || 'Not set'}</p>\r\n                </div>\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div className=\"bg-white p-4 rounded-2xl\">\r\n                    <label className=\"text-xs font-bold text-slate-400 uppercase\">Age</label>\r\n                    <p className=\"font-bold\">{userData?.age || 'N/A'}</p>\r\n                  </div>\r\n                  <div className=\"bg-white p-4 rounded-2xl\">\r\n                    <label className=\"text-xs font-bold text-slate-400 uppercase\">Blood Group</label>\r\n                    <p className=\"font-bold text-red-600 text-lg\">{userData?.bloodGroup || 'N/A'}</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"bg-white p-4 rounded-2xl\">\r\n                  <label className=\"text-xs font-bold text-slate-400 uppercase\">Phone</label>\r\n                  <p className=\"font-bold\">{userData?.phone || 'Not set'}</p>\r\n                </div>\r\n                <div className=\"bg-white p-4 rounded-2xl\">\r\n                  <label className=\"text-xs font-bold text-slate-400 uppercase\">Email</label>\r\n                  <p className=\"font-bold\">{userData?.email || 'Not set'}</p>\r\n                </div>\r\n                <div className=\"pt-4 border-t\">\r\n                  <label className=\"text-xs font-bold text-slate-400 uppercase\">Emergency Contacts</label>\r\n                  <div className=\"space-y-2 mt-3\">\r\n                    {userData?.emergencyContact1 && (\r\n                      <div className=\"text-sm font-medium bg-white p-3 rounded-lg border border-slate-200\">\r\n                        <p className=\"font-bold\">{userData.emergencyContact1}</p>\r\n                        <p className=\"text-slate-600\">{userData.emergencyPhone1}</p>\r\n                      </div>\r\n                    )}\r\n                    {userData?.emergencyContact2 && (\r\n                      <div className=\"text-sm font-medium bg-white p-3 rounded-lg border border-slate-200\">\r\n                        <p className=\"font-bold\">{userData.emergencyContact2}</p>\r\n                        <p className=\"text-slate-600\">{userData.emergencyPhone2}</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <button onClick={() => {\r\n                  handleLogout();\r\n                }} className=\"w-full mt-6 bg-red-100 hover:bg-red-200 text-red-600 font-bold py-3 rounded-xl transition-colors\">\r\n                  Logout\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {currentPage === 'nearest' && (\r\n            <div>\r\n              <button onClick={() => setCurrentPage('home')} className=\"mb-6 text-slate-400 font-bold\"> Back</button>\r\n              <h2 className=\"text-3xl font-black mb-6\">Top 3 Facilities</h2>\r\n              <div className=\"space-y-4\">\r\n                {[\r\n                  { name: 'City General Hospital', dist: '1.2km', beds: '4', time: '5 mins', address: '123 Medical St, Downtown', ambulance: '+91 98765 10001', toll: '1800-CITY-911', icuAvail: 4 },\r\n                  { name: 'St. Mary ICU Center', dist: '2.5km', beds: '2', time: '9 mins', address: '456 Healthcare Ave, North Zone', ambulance: '+91 98765 10002', toll: '1800-MARY-911', icuAvail: 2 },\r\n                  { name: 'Metro Health Complex', dist: '3.8km', beds: '12', time: '12 mins', address: '789 Wellness Rd, Metro Circle', ambulance: '+91 98765 10003', toll: '1800-METRO-911', icuAvail: 12 }\r\n                ].map((h, i) => (\r\n                  <motion.div \r\n                    key={i} \r\n                    initial={{ opacity: 0, y: 10 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ delay: i * 0.1 }}\r\n                    className=\"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm hover:shadow-md transition-all cursor-pointer\"\r\n                  >\r\n                    <div className=\"flex justify-between items-start mb-3\">\r\n                      <div>\r\n                        <h4 className=\"font-bold text-slate-900\">{h.name}</h4>\r\n                        <p className=\"text-sm text-slate-500 flex items-center gap-1 mt-1\">\r\n                          <MapPin className=\"w-4 h-4\" /> {h.address}\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        <p className=\"text-blue-600 font-black text-lg\">{h.time}</p>\r\n                        <p className=\"text-xs text-slate-400\">{h.dist}</p>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"grid grid-cols-2 gap-3 pt-3 border-t\">\r\n                      <div className=\"flex items-center gap-2 bg-green-50 p-2 rounded-lg\">\r\n                        <Bed className=\"w-4 h-4 text-green-600\" />\r\n                        <div>\r\n                          <p className=\"text-xs text-slate-500\">ICU Beds</p>\r\n                          <p className=\"font-bold text-green-600\">{h.icuAvail}</p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2 bg-blue-50 p-2 rounded-lg\">\r\n                        <Ambulance className=\"w-4 h-4 text-blue-600\" />\r\n                        <div>\r\n                          <p className=\"text-xs text-slate-500\">Ambulance</p>\r\n                          <p className=\"font-bold text-blue-600 text-sm\">Available</p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"mt-3 pt-3 border-t space-y-2\">\r\n                      <div className=\"flex items-center gap-2 text-slate-700\">\r\n                        <PhoneIcon className=\"w-4 h-4 text-orange-600\" />\r\n                        <span className=\"text-sm font-semibold\">{h.ambulance}</span>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2 text-slate-700\">\r\n                        <Phone className=\"w-4 h-4 text-purple-600\" />\r\n                        <span className=\"text-sm font-semibold\">{h.toll}</span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <button className=\"w-full mt-3 bg-red-600 hover:bg-red-700 text-white py-2 rounded-xl font-bold text-sm transition-colors\">\r\n                      Call Ambulance\r\n                    </button>\r\n                  </motion.div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- MAP PAGE ---\r\n  if (userRole === 'user' && currentPage === 'map') {\r\n    return (\r\n      <div className=\"min-h-screen bg-white\">\r\n        <div className=\"flex justify-between items-center p-4 bg-red-600 text-white\">\r\n          <h2 className=\"font-bold\">Live Location & Hospitals</h2>\r\n          <button onClick={() => setCurrentPage('home')} className=\"text-white hover:text-gray-200\"></button>\r\n        </div>\r\n        <div id=\"map\" style={{ width: '100%', height: 'calc(100vh - 60px)' }} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- HOSPITAL STAFF VIEW ---\r\n  if (userRole === 'hospital') {\r\n    return (\r\n      <div className=\"min-h-screen bg-slate-900 text-white p-6\">\r\n        <header className=\"flex justify-between items-center mb-10\">\r\n          <div><h2 className=\"text-xl font-black\">Staff Control</h2><p className=\"text-xs text-slate-400 underline decoration-green-500\">Live Station Active</p></div>\r\n          <LogOut onClick={handleLogout} className=\"text-slate-500\" />\r\n        </header>\r\n\r\n        <div className=\"space-y-6\">\r\n          <div className=\"bg-slate-800 p-6 rounded-3xl border border-red-500/30 animate-pulse\">\r\n            <div className=\"flex items-center gap-3 mb-4\">\r\n              <div className=\"w-3 h-3 bg-red-600 rounded-full\"></div>\r\n              <h3 className=\"font-bold text-red-500\">ACTIVE INBOUND SOS</h3>\r\n            </div>\r\n            <p className=\"text-sm text-slate-300 mb-4 font-mono uppercase tracking-tighter\">Patient: John Doe (Male, 28) <br/>Loc: 17.3850 N, 78.4867 E</p>\r\n            <button className=\"w-full bg-red-600 py-4 rounded-xl font-bold flex items-center justify-center gap-2\">\r\n              <MapPin /> TRACK ON MAP\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"bg-slate-800 p-6 rounded-3xl\">\r\n            <h3 className=\"font-bold mb-4 flex items-center gap-2\"><Ambulance className=\"w-5 h-5\" /> Dispatch Unit</h3>\r\n            <label className=\"text-[10px] text-slate-400 uppercase font-bold\">Assign Driver Number</label>\r\n            <div className=\"flex gap-2 mt-1\">\r\n              <input type=\"tel\" placeholder=\"+91 00000 00000\" className=\"flex-1 bg-slate-700 border-none rounded-xl p-3 text-sm\" />\r\n              <button className=\"bg-blue-600 px-4 rounded-xl font-bold font-sm\">SEND</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// --- REGISTRATION FORM COMPONENT ---\r\nfunction RegistrationForm({ onSubmit, onBack }) {\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    age: '',\r\n    bloodGroup: '',\r\n    phone: '',\r\n    email: '',\r\n    emergencyContact1: '',\r\n    emergencyPhone1: '',\r\n    emergencyContact2: '',\r\n    emergencyPhone2: '',\r\n  });\r\n\r\n  const [step, setStep] = useState(1);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (!formData.name || !formData.age || !formData.bloodGroup || !formData.phone) {\r\n      alert('Please fill all required fields');\r\n      return;\r\n    }\r\n    onSubmit(formData);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-red-50 to-slate-50 p-6\">\r\n      <div className=\"max-w-md mx-auto mt-10\">\r\n        <button onClick={onBack} className=\"mb-6 text-slate-600 font-bold flex items-center gap-2\">\r\n           Back\r\n        </button>\r\n\r\n        <div className=\"bg-white rounded-3xl shadow-xl p-8 border border-slate-100\">\r\n          <h1 className=\"text-3xl font-black text-slate-800 mb-2\">Setup Profile</h1>\r\n          <p className=\"text-slate-500 mb-6\">Complete your profile for emergency assistance</p>\r\n\r\n          {/* Progress Bar */}\r\n          <div className=\"flex gap-2 mb-8\">\r\n            {[1, 2].map((s) => (\r\n              <div key={s} className={`h-1 flex-1 rounded-full transition-all ${s <= step ? 'bg-red-600' : 'bg-slate-200'}`} />\r\n            ))}\r\n          </div>\r\n\r\n          {step === 1 && (\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"text-xs font-bold text-slate-500 uppercase\">Full Name *</label>\r\n                <input type=\"text\" name=\"name\" placeholder=\"Your full name\" value={formData.name} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\" />\r\n              </div>\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"text-xs font-bold text-slate-500 uppercase\">Age *</label>\r\n                  <input type=\"number\" name=\"age\" placeholder=\"Age\" value={formData.age} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\" />\r\n                </div>\r\n                <div>\r\n                  <label className=\"text-xs font-bold text-slate-500 uppercase\">Blood Group *</label>\r\n                  <select name=\"bloodGroup\" value={formData.bloodGroup} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\">\r\n                    <option value=\"\">Select</option>\r\n                    <option>O+</option>\r\n                    <option>O-</option>\r\n                    <option>A+</option>\r\n                    <option>A-</option>\r\n                    <option>B+</option>\r\n                    <option>B-</option>\r\n                    <option>AB+</option>\r\n                    <option>AB-</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label className=\"text-xs font-bold text-slate-500 uppercase\">Phone *</label>\r\n                <input type=\"tel\" name=\"phone\" placeholder=\"+91 XXXXX XXXXX\" value={formData.phone} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\" />\r\n              </div>\r\n              <div>\r\n                <label className=\"text-xs font-bold text-slate-500 uppercase\">Email</label>\r\n                <input type=\"email\" name=\"email\" placeholder=\"your@email.com\" value={formData.email} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\" />\r\n              </div>\r\n              <button onClick={() => setStep(2)} className=\"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-xl mt-6\">\r\n                Next\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {step === 2 && (\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"font-bold text-slate-800 mb-4\">Emergency Contacts</h3>\r\n              <div>\r\n                <label className=\"text-xs font-bold text-slate-500 uppercase\">Contact 1 Name *</label>\r\n                <input type=\"text\" name=\"emergencyContact1\" placeholder=\"Contact name\" value={formData.emergencyContact1} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\" />\r\n              </div>\r\n              <div>\r\n                <label className=\"text-xs font-bold text-slate-500 uppercase\">Contact 1 Phone *</label>\r\n                <input type=\"tel\" name=\"emergencyPhone1\" placeholder=\"+91 XXXXX XXXXX\" value={formData.emergencyPhone1} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\" />\r\n              </div>\r\n              <div>\r\n                <label className=\"text-xs font-bold text-slate-500 uppercase\">Contact 2 Name</label>\r\n                <input type=\"text\" name=\"emergencyContact2\" placeholder=\"Contact name\" value={formData.emergencyContact2} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\" />\r\n              </div>\r\n              <div>\r\n                <label className=\"text-xs font-bold text-slate-500 uppercase\">Contact 2 Phone</label>\r\n                <input type=\"tel\" name=\"emergencyPhone2\" placeholder=\"+91 XXXXX XXXXX\" value={formData.emergencyPhone2} onChange={handleChange} className=\"w-full mt-1 p-3 border border-slate-200 rounded-xl focus:outline-none focus:border-red-600\" />\r\n              </div>\r\n              <div className=\"flex gap-3 mt-6\">\r\n                <button onClick={() => setStep(1)} className=\"flex-1 bg-slate-200 hover:bg-slate-300 text-slate-800 font-bold py-3 rounded-xl\">\r\n                  Back\r\n                </button>\r\n                <button onClick={handleSubmit} className=\"flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-xl\">\r\n                  Complete\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}